import { useState, useEffect } from 'react';
import { Link, useLocation } from 'react-router-dom';

function MobileNavbar() {
  const [activeTab, setActiveTab] = useState('dashboard');
  const location = useLocation();

  useEffect(() => {
    const path = location.pathname;
    if (path === '/') setActiveTab('dashboard');
    else if (path === '/exam-tracker') setActiveTab('exam');
    else if (path === '/expense-tracker') setActiveTab('expense');
    else if (path === '/notify-friends') setActiveTab('notify');
    else if (path === '/bat-bot') setActiveTab('bot');
  }, [location]);

  const navItems = [
    { 
      id: 'dashboard', 
      path: '/', 
      icon: (
        <svg width="24" height="24" viewBox="5 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M8.97735 42.6424V22.4434C8.97735 21.7327 9.1367 21.0594 9.45539 20.4235C9.77409 19.7876 10.2132 19.2639 10.7728 18.8524L24.2388 8.75291C25.0244 8.15442 25.9221 7.85518 26.932 7.85518C27.942 7.85518 28.8397 8.15442 29.6252 8.75291L43.0913 18.8524C43.6524 19.2639 44.0922 19.7876 44.4109 20.4235C44.7296 21.0594 44.8882 21.7327 44.8867 22.4434V42.6424C44.8867 43.8768 44.4468 44.9339 43.5671 45.8136C42.6873 46.6934 41.631 47.1326 40.3981 47.1311H33.6651C33.0292 47.1311 32.4965 46.9156 32.0671 46.4847C31.6377 46.0538 31.4222 45.5211 31.4207 44.8867V33.6651C31.4207 33.0292 31.2053 32.4965 30.7743 32.0671C30.3434 31.6377 29.8108 31.4222 29.1764 31.4207H24.6877C24.0518 31.4207 23.5192 31.6362 23.0897 32.0671C22.6603 32.498 22.4449 33.0307 22.4434 33.6651V44.8867C22.4434 45.5226 22.2279 46.056 21.797 46.4869C21.3661 46.9179 20.8334 47.1326 20.199 47.1311H13.466C12.2316 47.1311 11.1753 46.6919 10.297 45.8136C9.41873 44.9354 8.97884 43.8783 8.97735 42.6424Z" fill="currentColor"/>
        </svg>
      ), 
      label: 'Home' 
    },
    { 
      id: 'exam', 
      path: '/exam-tracker', 
      icon: (
        <svg width="24" height="24" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M8.33333 6.25H41.6667C43.0417 6.25 44.1667 7.375 44.1667 8.75V37.5C44.1667 38.875 43.0417 40 41.6667 40H8.33333C6.95833 40 5.83333 38.875 5.83333 37.5V8.75C5.83333 7.375 6.95833 6.25 8.33333 6.25ZM8.33333 12.5V37.5H41.6667V12.5H8.33333ZM12.5 16.6667H37.5V20.8333H12.5V16.6667ZM12.5 25H29.1667V29.1667H12.5V25ZM33.3333 25H37.5V29.1667H33.3333V25Z" fill="currentColor"/>
        </svg>
      ), 
      label: 'Exams' 
    },
    { 
      id: 'expense', 
      path: '/expense-tracker', 
      icon: (
        <svg width="24" height="24" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path fillRule="evenodd" clipRule="evenodd" d="M20.932 24.1402C20.932 22.7931 21.4672 21.5012 22.4197 20.5486C23.3723 19.5961 24.6642 19.0609 26.0113 19.0609H32.7837C33.6818 19.0609 34.5431 19.4177 35.1781 20.0527C35.8131 20.6878 36.1699 21.5491 36.1699 22.4471V25.8333C36.1699 26.7314 35.8131 27.5927 35.1781 28.2277C34.5431 28.8628 33.6818 29.2195 32.7837 29.2195H26.0113C24.6642 29.2195 23.3723 28.6844 22.4197 27.7318C21.4672 26.7793 20.932 25.4873 20.932 24.1402ZM26.0113 22.4471C25.5623 22.4471 25.1316 22.6255 24.8141 22.943C24.4966 23.2605 24.3182 23.6912 24.3182 24.1402C24.3182 24.5893 24.4966 25.0199 24.8141 25.3374C25.1316 25.6549 25.5623 25.8333 26.0113 25.8333H32.7837V22.4471H26.0113Z" fill="currentColor"/>
          <path fillRule="evenodd" clipRule="evenodd" d="M21.4281 6.01226C21.7456 5.69485 22.1762 5.51654 22.6251 5.51654C23.0741 5.51654 23.5047 5.69485 23.8222 6.01226L28.4054 10.5955H23.6173L21.4281 8.40629C21.1107 8.08879 20.9324 7.65822 20.9324 7.20928C20.9324 6.76033 21.1107 6.32976 21.4281 6.01226ZM21.633 10.5955L17.0498 6.01226C16.7323 5.69485 16.3017 5.51654 15.8527 5.51654C15.4038 5.51654 14.9732 5.69485 14.6557 6.01226L10.0725 10.5955H21.633ZM8.37942 12.2886L8.28461 12.3817C7.54592 12.5603 6.88879 12.9822 6.41893 13.5795C5.94906 14.1768 5.69379 14.9148 5.69417 15.6748V32.6057C5.69417 33.5038 6.05093 34.3651 6.68596 35.0001C7.321 35.6352 8.18229 35.9919 9.08036 35.9919H29.3975C30.2956 35.9919 31.1569 35.6352 31.7919 35.0001C32.427 34.3651 32.7837 33.5038 32.7837 32.6057H26.0113C23.7661 32.6057 21.6129 31.7138 20.0253 30.1262C18.4377 28.5387 17.5458 26.3854 17.5458 24.1402C17.5458 21.8951 18.4377 19.7418 20.0253 18.1542C21.6129 16.5667 23.7661 15.6748 26.0113 15.6748H32.7837C32.7841 14.9148 32.5288 14.1768 32.059 13.5795C31.5891 12.9822 30.932 12.5603 30.1933 12.3817L30.0985 12.2886H8.37942Z" fill="currentColor"/>
        </svg>
      ), 
      label: 'Money' 
    },
    { 
      id: 'notify', 
      path: '/notify-friends', 
      icon: (
        <svg width="24" height="24" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M4.03125 21.5788V33.2551C4.03125 34.624 4.58308 36.068 5.46458 37.066C6.36221 38.0819 7.8905 38.8792 9.56212 38.0389C10.8091 37.4118 11.8465 37.3885 12.6904 37.9547C14.7078 39.3074 17.5422 39.3074 19.5596 37.9547C20.1777 37.5426 20.6472 37.4028 21.0377 37.3993C21.4283 37.3975 21.9067 37.5282 22.5427 37.9547C24.562 39.3074 27.3964 39.3074 29.4138 37.9547C29.7954 37.7002 30.453 37.53 31.2843 37.5498C32.0977 37.5677 32.8932 37.7648 33.4379 38.0389C35.1095 38.8792 36.6378 38.0819 37.5354 37.066C38.4169 36.068 38.9688 34.624 38.9688 33.2569V21.5788C38.9688 11.8949 31.1535 4.03125 21.5 4.03125C11.8465 4.03125 4.03125 11.8949 4.03125 21.5788ZM30.0391 23.2522C30.2867 23.5082 30.4226 23.852 30.4169 24.2081C30.4112 24.5642 30.2643 24.9035 30.0086 25.1514C29.7014 25.4499 29.381 25.7345 29.0483 26.0042L29.4389 26.8015C29.8919 27.7589 29.95 28.856 29.6006 29.8558C29.2512 30.8557 28.5224 31.6778 27.5717 32.1446C26.621 32.6113 25.5248 32.6852 24.52 32.3502C23.5153 32.0152 22.6827 31.2983 22.2023 30.3544L21.7132 29.3565C19.4584 29.7956 17.1354 29.7425 14.9031 29.2006C14.5619 29.1099 14.2702 28.8887 14.0908 28.5846C13.9115 28.2806 13.8589 27.9182 13.9446 27.5758C14.0303 27.2333 14.2472 26.9384 14.5486 26.7546C14.85 26.5708 15.2116 26.513 15.5553 26.5937C17.5798 27.1007 19.9072 27.1079 22.2668 26.4755C24.6265 25.843 26.6385 24.6748 28.1399 23.2218C28.3959 22.9741 28.7397 22.8383 29.0958 22.844C29.4519 22.8497 29.7912 22.9965 30.0391 23.2522ZM24.6157 29.1701L24.3523 28.6344C25.2135 28.3239 26.0293 27.9536 26.7997 27.5236L27.0273 27.9858C27.1698 28.3037 27.1832 28.6645 27.0648 28.9921C26.9464 29.3197 26.7054 29.5886 26.3927 29.7419C26.0799 29.8953 25.7198 29.9212 25.3883 29.8142C25.0568 29.7072 24.7798 29.4774 24.6157 29.1701ZM16.7145 17.9167L16.899 18.7928C16.9402 18.9671 16.9461 19.1478 16.9164 19.3244C16.8867 19.501 16.822 19.6698 16.7261 19.8211C16.6303 19.9723 16.5051 20.1029 16.3581 20.2051C16.2111 20.3073 16.0451 20.379 15.8699 20.4162C15.6947 20.4533 15.5139 20.455 15.338 20.4213C15.1622 20.3876 14.9948 20.319 14.8459 20.2197C14.6969 20.1204 14.5692 19.9923 14.4704 19.8429C14.3717 19.6936 14.3037 19.526 14.2706 19.35L14.0843 18.4739C14.0431 18.2996 14.0372 18.1189 14.0669 17.9423C14.0966 17.7657 14.1613 17.5968 14.2571 17.4456C14.353 17.2943 14.4782 17.1638 14.6252 17.0616C14.7722 16.9594 14.9382 16.8876 15.1134 16.8505C15.2886 16.8134 15.4694 16.8116 15.6452 16.8454C15.8211 16.8791 15.9884 16.9476 16.1374 17.047C16.2864 17.1463 16.4141 17.2744 16.5128 17.4237C16.6116 17.5731 16.6796 17.7407 16.7127 17.9167M23.8793 15.0177C24.052 14.9809 24.2303 14.9785 24.4039 15.0107C24.5776 15.0428 24.7432 15.1089 24.8913 15.205C25.0394 15.3012 25.167 15.4256 25.267 15.5712C25.367 15.7168 25.4373 15.8806 25.4739 16.0533L25.6602 16.9295C25.7001 17.1032 25.705 17.2831 25.6746 17.4588C25.6442 17.6344 25.5792 17.8023 25.4833 17.9526C25.3874 18.1029 25.2626 18.2326 25.1161 18.3341C24.9696 18.4357 24.8044 18.5071 24.63 18.5442C24.4557 18.5813 24.2757 18.5833 24.1005 18.5501C23.9254 18.517 23.7586 18.4493 23.6098 18.351C23.4611 18.2528 23.3334 18.1259 23.2342 17.9778C23.135 17.8297 23.0662 17.6634 23.0319 17.4885L22.8455 16.6105C22.7717 16.262 22.8394 15.8984 23.0336 15.5997C23.2278 15.3011 23.5326 15.0917 23.8811 15.0177" fill="currentColor"/>
        </svg>
      ), 
      label: 'Friends' 
    },
    { 
      id: 'bot', 
      path: '/bat-bot', 
      icon: (
        <svg width="24" height="24" viewBox="0 0 40 50" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M30.018 0.246155C34.4468 3.09026 35.9231 7.35641 35.9231 10.2005C35.9231 21.5769 35.9231 32.9533 32.9705 42.9077L31.4942 32.9533C27.0654 35.7974 21.1603 38.6415 18.2077 38.6415C15.2551 38.6415 9.35 35.7974 4.92116 32.9533L3.44487 42.9077C0.49231 32.9533 0.49231 21.5769 0.49231 10.2005C0.49231 7.35641 1.96859 3.09026 6.39744 0.246155C4.92116 4.51231 4.92116 8.77846 6.39744 11.6226C12.3026 8.77846 24.1128 8.77846 30.018 11.6226C31.4942 8.77846 31.4942 4.51231 30.018 0.246155ZM30.018 22.999C26.9085 27.1585 25.22 28.0828 19.684 30.1092C22.7749 32.9533 28.4955 32.0201 31.4942 28.6872C32.7952 27.2385 32.1217 24.7232 30.018 22.999ZM6.39744 22.999C4.29374 24.7232 3.62018 27.2385 4.92116 28.6872C7.91985 32.0201 13.6404 32.9533 16.7314 30.1092C11.1954 28.0828 9.50686 27.1585 6.39744 22.999Z" fill="currentColor"/>
        </svg>
      ), 
      label: 'Bot' 
    },
  ];

  return (
    <div className="fixed bottom-0 left-0 right-0 z-50 bg-white border-t border-gray-200 md:hidden">
      <div className="flex items-center justify-around px-4 py-2">
        {navItems.map((item) => (
          <Link
            key={item.id}
            to={item.path}
            onClick={() => setActiveTab(item.id)}
            className={`flex flex-col items-center py-2 px-3 rounded-lg transition-all duration-200 ${
              activeTab === item.id 
                ? 'bg-[#064469] text-white transform scale-110' 
                : 'text-gray-600 hover:bg-gray-100'
            }`}
          >
            <span className="mb-1">{item.icon}</span>
            <span className="text-xs font-medium">{item.label}</span>
          </Link>
        ))}
      </div>
    </div>
  );
}

export default MobileNavbar;